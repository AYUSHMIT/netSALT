[CreateQuantumGraph]
graph_path = buffon.gpickle
graph_mode = open
inner_total_length = 2500.0

dielectric_mode = refraction_params
method = uniform
inner_value = 1.5
loss = 0.001
outer_value = 1.5
edge_size = 10.0

k_a = 10.68
gamma_perp = 0.5

target_path = out/quantum_grid.pickle

[ModeSearchConfig]
n_workers = 80
k_n = 1500
k_min = 10.35
k_max = 11.0
alpha_n = 400
alpha_min = 0.006
alpha_max = 0.015
quality_threshold = 1e-5
search_stepsize = 0.001
max_steps = 10000
max_tries_reduction = 50
reduction_factor = 0.8

[PumpConfig]
D0_max = .01
D0_steps = 10

[PlotQuantumGraph]
target_path = figures/quantum_graph.pdf

[ScanFrequencies]
target_path = out/qualities.h5

[PlotScan]
target_path = figures/scan_frequencies.pdf

[FindPassiveModes]
target_path = out/passive_modes.h5

[PlotPassiveModes]
ext = .pdf
n_modes = 100
target_path = figures/passive_modes

[PlotScanWithModes]
target_path = figures/scan_frequencies_with_modes.pdf

[ComputeModeTrajectories]
target_path = out/modes_trajectories.h5

[CreatePumpProfile]
mode = optimized 
lasing_modes_id = [20]
target_path = out/pump_profile.yaml

[PlotScanWithModeTrajectories]
target_path = figures/mode_trajectories.pdf

[FindThresholdModes]
target_path = out/lasing_thresholds_modes.h5

[PlotThresholdModes]
n_modes = 100
target_path = figures/threshold_modes

[PlotScanWithThresholdModes]
target_path = figures/threshold_modes.pdf

[ComputeModeCompetitionMatrix]
target_path = out/mode_competition_matrix.h5

[ComputeModalIntensities]
D0_max = 0.03
target_path = out/modal_intensities.h5

[PlotLLCurve]
target_path = figures/ll_curve.pdf

[PlotStemSpectra]
target_path = figures/stem_spectra.pdf

[OptimizePump]
pump_min_frac = 0.5
maxiter = 500
popsize = 10
n_seeds = 20
disp = True

target_path = out/optimized_pump.pkl

[PlotOptimizedPump]
target_path = figures/optimized_pump.pdf

[ComputeControllability]
n_top_modes = 20
target_path = figures/single_mode_control.pdf
